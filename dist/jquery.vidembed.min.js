/*
 *  Vidembed - v0.1
 *  Embed YouTube, Vimeo and Instagram videos with just a link.
 *  http://github.com/joshellington/Vidembed
 *
 *  Made by Josh Ellington
 *  Under MIT License
 */
!function(a){function b(b,e){this.element=b,this.settings=a.extend({},d,e),this._defaults=d,this._name=c,this.init()}var c="vidembed",d={embed:!1,service:!1,youtube:{width:640,height:480},vimeo:{width:640,height:480},instagram:{width:612,height:710},facebook:{width:550,height:450}};b.prototype={init:function(){this.check()},check:function(){var b=a(this.element).attr("href")||a(this.element).attr("data-href");b?-1!==b.indexOf("youtube")?(this.settings.service="youtube",this.parseYoutube(b)):-1!==b.indexOf("vimeo")?(this.settings.service="vimeo",this.parseVimeo(b)):-1!==b.indexOf("instagram")?(this.settings.service="instagram",this.parseInstagram(b)):-1!==b.indexOf("facebook")&&(this.settings.service="facebook",this.parseFacebook(b)):console.error("Missing href value.")},parseYoutube:function(a){var b=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,c=a.match(b)?RegExp.$1:!1,d="//youtube.com/embed/"+c;this.render(d)},parseVimeo:function(a){var b=/http(s)?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,c=a.match(b)?RegExp.$3:!1,d="//player.vimeo.com/video/"+c;this.render(d)},parseInstagram:function(a){var b=a.split("/")[4],c="//instagram.com/p/"+b+"/embed/";this.render(c)},parseFacebook:function(a){var b="http://static.ak.facebook.com/connect/xd_arbiter/dgdTycPTSRj.js?version=40#cb=f564c1178",c=this.getQueryVariable(a,"v"),d="https://www.facebook.com/photo.php?v="+c,e="https://www.facebook.com/plugins/post.php?app_id=&channel="+encodeURIComponent(b)+"          &href="+encodeURIComponent(d)+"          &sdk=joey&width="+this.settings[this.settings.service].width;console.log(c),this.render(e)},getQueryVariable:function(a,b){var c=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),d=new RegExp("[\\?&]"+c+"=([^&#]*)"),e=d.exec(a);return null==e?"":decodeURIComponent(e[1].replace(/\+/g," "))},render:function(b){if(this.settings.embed){var c="<iframe src='"+b+"' width='"+this.settings[this.settings.service].width+"' height='"+this.settings[this.settings.service].height+"' frameborder='0' webkitallowfullscreen mozallowfullscreen allowfullscreen scrolling='no' allowtransparency='true'></iframe>";a(this.element).replaceWith(c)}else a(this.element).attr("data-embed",b).attr("data-embed-width",this.settings[this.settings.service].width).attr("data-embed-height",this.settings[this.settings.service].height)}},a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))}),this}}(jQuery,window,document);